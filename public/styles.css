:root {
  --bg: #f8fafc;
  --card: #ffffff;
  --ink: #0b1f3b;
  --muted: #6b7a90;
  --muted-ink: #6b7a90;
  --primary: #2d6cdf;
  --ring: #9db7f0;
  --success: #16a34a;
  --error: #dc2626;
  --warning: #d97706;
  --radius: 12px;
  --shadow: 0 2px 8px rgba(13, 37, 78, 0.15);
  --btn-primary-bg: #2563eb;
  --btn-primary-hover: #1d4ed8;
  --btn-primary-fg: #fff;
  --btn-disabled-fg: #6b7280;
  --btn-disabled-bg: #e5e7eb;
  --btn-disabled-border: #d1d5db;
}

[data-theme="dark"] {
  --bg: #0f172a;
  --card: #1e293b;
  --ink: #f1f5f9;
  --muted: #94a3b8;
  --muted-ink: #94a3b8;
  --primary: #60a5fa;
  --ring: #3b82f6;
  --shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
  --btn-primary-bg: #2563eb;
  --btn-primary-hover: #1d4ed8;
  --btn-primary-fg: #fff;
  --btn-disabled-fg: #9ca3af;
  --btn-disabled-bg: #374151;
  --btn-disabled-border: #4b5563;
}

* { box-sizing: border-box; }
.hidden { display:none!important; }

body {
  margin:0;
  font-family: system-ui, sans-serif;
  background: var(--bg);
  color: var(--ink);
  line-height:1.5;
}

.container {
  max-width:960px;
  margin:0 auto;
  padding:0 1rem;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

.header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:1rem;
  padding:1rem 0;
}
.header .logo {
  font-weight:700;
  text-decoration:none;
  color:var(--ink);
}
.nav { display:flex; gap:1rem; }
.nav a { text-decoration:none; color:var(--ink); font-weight:500; }
.nav a:hover { color:var(--primary); }

.header-actions { display:flex; align-items:center; gap:1rem; }

.panel { flex:1; }

.form-grid{ display:grid; gap:16px; grid-template-columns: 1fr; }
@media (min-width: 900px){
  .form-grid{ grid-template-columns: 420px 320px; align-items:end; }
}
.field{ display:flex; flex-direction:column; gap:6px; }
.label { display:block; font-weight:600; }
.input{
  width:100%; height:44px; padding:10px 12px; border:1px solid var(--muted); border-radius:10px; background:var(--card); color:var(--ink);
}
.input:focus{ outline:none; border-color:var(--primary); box-shadow:0 0 0 3px color-mix(in oklab, var(--primary) 20%, transparent); }
.input--cpf{ max-width:420px; letter-spacing:.02em; }
.hint{ font-size:.85rem; color:var(--muted-ink); }
.hint--error{ color:var(--error); }
.input-group{ position:relative; }
/* readonly visual */
.input[readonly]{ background:color-mix(in oklab, var(--card) 85%, var(--muted) 15%); cursor:not-allowed; }

.actions { display:flex; flex-wrap:wrap; gap:0.75rem; margin-top:1rem; }

.checkline { display:flex; align-items:center; gap:0.5rem; margin-top:0.5rem; font-size:0.875rem; }
.checkline input { accent-color: var(--primary); }

.btn {
  padding:0.5rem 1rem;
  border-radius:var(--radius);
  border:2px solid transparent;
  background:var(--card);
  color:var(--ink);
  cursor:pointer;
  font-size:1rem;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:0.25rem;
}
.btn--primary { background:var(--btn-primary-bg); color:var(--btn-primary-fg); }
.btn--primary:hover{ background:var(--btn-primary-hover); }
.btn--outline { background:transparent; border-color:var(--primary); color:var(--primary); }
.btn[disabled] { background:var(--btn-disabled-bg); color:var(--btn-disabled-fg); border-color:var(--btn-disabled-border); cursor:not-allowed; }
.btn--loading{ position:relative; pointer-events:none; }
.btn--loading::after{
  content:""; width:1rem; height:1rem; border:2px solid currentColor; border-top-color:transparent; border-radius:50%; animation:spin 1s linear infinite;
}
@keyframes spin { to { transform:rotate(360deg); } }

.card {
  background: var(--card);
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 16px;
}
.kpi-grid{display:grid;gap:1rem;margin-top:1.5rem;}

.settings-dialog::backdrop{ background: rgba(0,0,0,.35); }
.settings-dialog{ border:0; border-radius:18px; padding:20px; max-width:720px; width:90%; background:var(--card); color:var(--ink); }
.settings-dialog .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.settings-dialog .row.end{ justify-content:flex-end; }
.test-output{ background:var(--bg); padding:8px; border-radius:10px; max-height:140px; overflow:auto; }
@media(min-width:600px){.kpi-grid{grid-template-columns:repeat(auto-fit,minmax(160px,1fr));}}
.result { display:grid; row-gap:0.5rem; }

.status { display:flex; align-items:center; gap:0.5rem; font-size:0.875rem; }
.status-dot { width:12px; height:12px; border-radius:50%; background:var(--warning); }
.status-dot--ok{ background:var(--success); }
.status-dot--warn{ background:var(--warning); }
.status-dot--down{ background:var(--error); }

.badge { display:inline-block; padding:.15rem .5rem; border-radius:999px; background:var(--muted); color:var(--ink); font-size:.8rem; }
.badge--ok { background:#e9f7ee; color:#0a7c2f; }
.badge--error { background:#ffeceb; color:#7a0000; }
.msg { padding:.75rem 1rem; border-radius:10px; margin:10px 0; background: var(--card); color: var(--ink); border:1px solid var(--muted); }
.msg--error { border-color:#b3261e; background:#ffeceb; color:#7a0000; }
.msg--ok { border-color:#0a7c2f; background:#e9f7ee; color:#0a7c2f; }
.pinline { display:flex; gap:.5rem; align-items:center; }
.spinner { width:16px; height:16px; border:2px solid #ccc; border-top-color:#555; border-radius:50%; animation:spin .8s linear infinite; display:inline-block; vertical-align:middle; }
.is-loading { opacity:.6; pointer-events:none; }

.table { width:100%; border-collapse:collapse; margin-top:0.5rem; }
.table th, .table td { padding:0.5rem; text-align:left; }
.table tbody tr:nth-child(even){ background:rgba(0,0,0,0.03); }
[data-theme="dark"] .table tbody tr:nth-child(even){ background:rgba(255,255,255,0.05); }

.toasts { position:fixed; top:1rem; right:1rem; display:grid; gap:0.5rem; z-index:1000; }
.toast { background:var(--card); color:var(--ink); padding:0.5rem 0.75rem; border-radius:var(--radius); box-shadow:var(--shadow); }
.toast--success{ border-left:4px solid var(--success); }
.toast--error{ border-left:4px solid var(--error); }
.toast--info{ border-left:4px solid var(--primary); }

.tag{display:inline-block; padding:.15rem .5rem; border-radius:999px; font-size:.8rem;}
.tag--new{ background:#e9f7ee; color:#0a7c2f;}
.tag--upd{ background:#e7f0ff; color:#1849a9;}
.tag--bad{ background:#ffeceb; color:#7a0000;}
.tag--dup{ background:#fff7e6; color:#7a4a00;}

.modal{position:fixed; inset:0; background:rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center;}
.modal.hidden{display:none;}

.skeleton { position:relative; color:transparent; }
.skeleton * { visibility:hidden; }
.skeleton::after {
  content:""; position:absolute; inset:0; background:linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent); background-size:200% 100%; animation:shimmer 1.5s infinite;
}
.skeleton-line { height:1em; background:var(--muted); border-radius:4px; margin:0.25rem 0; }
.skeleton-row td{ height:36px; background: linear-gradient(90deg,#eee,#f5f5f5,#eee); background-size:200% 100%; animation: shimmer 1.2s infinite; }
@keyframes shimmer { 0%{background-position:200% 0} 100%{background-position:-200% 0} }

.footer { text-align:center; font-size:0.875rem; color:var(--muted); padding:2rem 0; }

.reader-modes { display:flex; align-items:center; gap:16px; margin-bottom:12px; }
.reader-modes label { display:flex; align-items:center; gap:6px; cursor:pointer; }
.qr-controls { margin-top:8px; }
.qr-reader { width:260px; height:260px; background:#fff; border:1px solid #e5e7eb; border-radius:12px; box-shadow:var(--shadow); }

@media (min-width:768px){ .actions{flex-wrap:nowrap;} .nav{gap:1.5rem;} }
@media print { .header, .footer, .toasts { display:none!important; } .card{box-shadow:none;} }
.settings-dialog::backdrop{ background: rgba(0,0,0,.35); }
.settings-dialog{ border:0; border-radius:20px; padding:0; max-width:760px; width:92%; background:var(--card); color:var(--ink); box-shadow:0 12px 40px rgba(0,0,0,.25); }
.dialog-header{ display:flex; align-items:center; justify-content:space-between; padding:16px 20px; border-bottom:1px solid var(--muted); }
.dialog-title{ font-size:1.15rem; margin:0; }
.icon-btn{ border:0; background:transparent; font-size:1.2rem; line-height:1; cursor:pointer; color:var(--ink); opacity:.7; }
.icon-btn:hover{ opacity:1; }

.settings{ padding:0; }
.section{ padding:16px 20px; }
.section + .section{ padding-top:8px; }
.section-title{ margin:0 0 10px; font-size:1rem; font-weight:600; }
.divider{ border:none; border-top:1px solid var(--muted); margin:0; }

.form-grid-2{ display:grid; grid-template-columns:1fr; gap:12px; }
@media (min-width: 820px){
  .form-grid-2{ grid-template-columns:1fr 1fr; }
}
.field{ display:flex; flex-direction:column; gap:6px; }
.input{ width:100%; height:42px; padding:10px 12px; border:1px solid var(--muted); border-radius:10px; background:var(--card); color:var(--ink); }
.input:focus{ outline:none; border-color:var(--primary); box-shadow:0 0 0 3px color-mix(in oklab, var(--primary) 18%, transparent); }
.help{ font-size:.85rem; color:var(--muted-ink); }

.row{ display:flex; align-items:center; }
.gap{ gap:10px; }

.dialog-footer{ display:flex; align-items:center; gap:10px; padding:14px 20px; border-top:1px solid var(--muted); background:color-mix(in oklab, var(--card) 85%, var(--muted) 15%); border-bottom-left-radius:20px; border-bottom-right-radius:20px; }
.spacer{ flex:1; }

/* Switches (toggles) */
.switches{ display:grid; grid-template-columns:1fr; gap:10px; margin-top:6px; }
@media (min-width: 820px){
  .switches{ grid-template-columns:1fr 1fr; }
}
.switch{ display:flex; align-items:center; gap:10px; cursor:pointer; user-select:none; }
.switch input{ appearance:none; width:44px; height:26px; margin:0; position:relative; border-radius:999px; background:var(--muted); outline:none; transition:.2s; }
.switch input:checked{ background:var(--primary); }
.switch .slider{ position:absolute; width:20px; height:20px; margin-left:3px; border-radius:50%; background:#fff; transform:translateX(0); transition:transform .2s; box-shadow:0 1px 3px rgba(0,0,0,.25); }
.switch input:checked + .slider{ transform:translateX(18px); }
.switch-label{ color:var(--ink); }

/* Test box */
.test-output{ background:var(--bg); border:1px solid var(--muted); padding:10px; border-radius:12px; min-height:70px; max-height:180px; overflow:auto; }

.money-input{ position:relative; display:inline-flex; align-items:center; width:100%; }
.money-input .money-prefix{
  position:absolute; left:12px; top:50%; transform:translateY(-50%);
  color:var(--muted-ink); font-weight:600; pointer-events:none;
}
.money-input > .input{
  padding-left: calc(12px + 1.9em); /* espaço pro "R$" */
  font-variant-numeric: tabular-nums;
}
.money-input > .input::placeholder{ color: color-mix(in oklab, var(--muted-ink) 85%, transparent); }

/* CPF: largura mais enxuta em telas grandes (opcional, responsivo) */
@media (min-width: 920px){
  #cpf{ max-width: 420px; }
}
.topbar{ display:flex; align-items:center; justify-content:space-between; gap:16px; padding:12px 8px; position:sticky; top:0; background:var(--bg); z-index:10; border-bottom:1px solid var(--muted); }
.brand{ display:flex; align-items:center; gap:10px; font-weight:700; }
.brand .dot{ width:10px; height:10px; border-radius:999px; background:var(--primary); display:inline-block; }
.brand-title{ color:var(--ink); text-decoration:none; }
.mainnav{ display:flex; gap:10px; flex-wrap:wrap; }
.mainnav a{ padding:8px 12px; border-radius:10px; text-decoration:none; color:var(--ink); }
.mainnav a.active{ background:var(--primary); color:#fff; }
.tools{ display:flex; gap:8px; align-items:center; }
.badge{ padding:.2rem .6rem; border-radius:999px; font-size:.85rem; background:var(--card); border:1px solid var(--muted); }
.badge--ok{ background:#e9f7ee; border-color:#b8e2c5; color:#0a7c2f; }
.badge--warn{ background:#fff4e8; border-color:#ffd7aa; color:#7a4a00; }
.badge--muted{ color:var(--muted-ink); }
.footer{ padding:20px 8px; color:var(--muted-ink); text-align:center; }

.pinrow{ display:grid; gap:8px; }
.pinbox{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.btn{ padding:8px 12px; border-radius:10px; border:1px solid var(--muted); background:var(--bg); cursor:pointer; }
.btn--secondary{ background:var(--primary); color:#fff; border-color:var(--primary); }
.btn--ghost{ background:transparent; }
@media (max-width:700px){ .mainnav{ overflow:auto; } }

/* Money input */
.money-input .money-box { position: relative; }
.money-input .prefix {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  font-weight: 500;
  color: var(--muted-foreground, #6b7280);
}
.money-input input.input {
  padding-left: 2.4rem;
}

/* Botão Consultar com melhor contraste quando disabled */
#btn-consultar:disabled {
  color: #374151;
  background: #e5e7eb;
  border-color: #d1d5db;
}

/* Padronização geral de páginas internas */
.page { max-width: 1080px; margin: 0 auto; padding: 24px 16px; }
.page h1 { font-size: 1.375rem; font-weight: 700; margin: 0 0 16px; }
.grid { display: grid; gap: 12px; }
@media (min-width: 768px) {
  .grid-cols-2 { grid-template-columns: 1fr 1fr; }
  .grid-cols-3 { grid-template-columns: 1fr 1fr 1fr; }
}
